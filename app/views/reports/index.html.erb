<head>
  <%= stylesheet_link_tag  "application", :media => "all" %>


<%= javascript_include_tag  "jquery.slim.min", "tether.min", "bootstrap3.min", "bootstrap-1.4.1-datepicker.min", "bootstrap-datepicker.da.min" %>


</head>


<style>
/*
   input.form-control {
   	pointer-events: none;
   	cursor:not-allowed;
   }

   */
  .notype {
    cursor:not-allowed;
}

input:focus,
select:focus,
textarea:focus,
button:focus {
    outline: none;
}


body {
 /* width: 100%;
  min-height: 500px;
  margin: 3em auto;  */
  /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f7cac9+0,92a8d1+100 */
/*  background: #f7cac9; */
 /* background: #f5f5f5; */
  /* Old browsers */
 /* background: -moz-linear-gradient(-45deg, #f7cac9 0%, #92a8d1 100%); */
  /* FF3.6-15 */
 /* background: -webkit-linear-gradient(-45deg, #f7cac9 0%, #92a8d1 100%); */
  /* Chrome10-25,Safari5.1-6 */
 /* background: linear-gradient(135deg, #f7cac9 0%, #92a8d1 100%); */
  /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
  /* IE6-9 fallback on horizontal gradient */
  font-family: 'Roboto', sans-serif;
 /* letter-spacing: 1px;  */
 /*position: absolute; */ 
 margin: auto;
}

label {
	margin-bottom: 0px;
}

i:hover {
	cursor:pointer;
}


/*form {
	position:fixed;
	margin-left: 13%;
}
*/


</style>

<%= link_to :controller => 'home', :action => 'index' do %>
  <button type="button" class="btn btn-info">Back to Main Menu</button>
<% end %>


<h1 class="mt-2">Generate Royalty Report</h1>


<div class="container">







<div class="mt-5 mx-auto">
  <%= form_tag({controller: "reports", action: "report"}, method: "post", :id => "report_form") do %>

	<div class="aoyue-select animated zoomIn" id="select-form">
	    <!-- You can toggle select (disabled) -->
	    <input type="radio" id="select" name="option" >
	    <i class="toggle icon icon-arrow-down"></i>
	    <i class="toggle icon icon-arrow-up"></i>
	    <span class="placeholder">Select Artist</span>
	    <% @artists.each do |artist| %>
		    <label class="option" for="id_<%= artist.id %>">
		      <input type="radio" class="name_swap" name="option" id="id_<%= artist.id %>" value=<%= artist.id %> >
		      <span class="title animated fadeIn"><i class="icon icon-fire"></i><%= artist.e_name %></span>
		    </label>
	    <% end %>
	</div>



    <div class="row mt-4 align-items-center">
        <div class="col-sm-2 offset-2">
	       <%= label(:start_date, "Start Date") %>

	        <div class="input-group date" id="dateRangePicker1" >
	          <%= text_field_tag "start_date", '', class: "form-control", readonly: "readonly", disabled: "true" %>
	          <span class="input-group-addon add-on">
	             <i class="glyphicon glyphicon-calendar"></i>
	           </span>  
	        </div>
        </div> <!--col-->

        <div class="col-sm-2 offset-3">
	       <%= label(:end_date, "End Date") %>

	        <div class="input-group date" id="dateRangePicker2" >
	          <%= text_field_tag "end_date", '', class: "form-control", readonly: "readonly", disabled: "true" %>
	          <span class="input-group-addon add-on">
	             <i class="glyphicon glyphicon-calendar"></i>
	           </span>  
	        </div>
	    </div> <!--col-->    
    </div> <!--row-->    

    <div class="row mt-3 align-items-cneter">
      <div class="col-sm-2 mx-auto">
         <%= submit_tag("Submit", :id => "form-submit") %>
      </div> 
    </div> <!--row-->
  <% end %> 
</div>

</div>







<script type="text/javascript">
  $(document).ready(function(){
  	/* $('input[type = "radio"]').change(function () {
        return false;
    });

    */
    var radio_toggle = 1;

     var pos = $("body").position();

   function manual_click() {
    	console.log("initiating manual_click...");
    	//$("input[type=radio]").attr('disabled', false);
    	//alert("Starting Click");
    	//$("i.icon-arrow-up").trigger('click');
    	//alert("Ending Click");
    	setTimeout(function(){ 
      		$("#select").prop("checked", false); 
      	}, 200);
    	//$("#report_form").hide(); 
    	//$("#report_form").show(); 
    	radio_toggle = 1;
    	console.log("ending manual_click.");
    }

  	

  	$('input.form-control').attr("data-provide", "datepicker");

  	$(".aoyue-select > label").attr("class", "option");

  	$('html').click(function(e) {
	  //if clicked element is not your element and parents aren't your div
	// var x = $("i.icon-arrow-down").length;
	// var y = $("#select").prop("checked")
	 //alert(y); 
	  if (e.target.id != 'select-form' && $(e.target).parents('#select-form').length == 0 ) {
	    $("#select").prop("checked", false);
	  }
   });

/*
  	 $("#select").on("click", function(ev) {
  	 	var checked = document.getElementById("select").checked; 
  	 	ev.preventDefault();
  	 	console.log("Before: " + checked);
  	 	if ($("#select").prop("checked", true))  {
    	console.log("Select clicked.");
    	console.log("After: " + checked);
    	//var check = document.getElementById("select").checked; 
    	//alert(check);
           $("#select").prop("checked", false);
        }
        return true;
    }); 

*/
    $("i.toggle.icon-arrow-down").on("click", function() {
       $("#select").prop("checked", true);
       var checked = document.getElementById("select").checked; 
       console.log("Before: " + checked);
    }); 

    $("i.toggle.icon-arrow-up").on("click", function() {
       $("#select").prop("checked", false);
    }); 

 /*
    $("#select").on("click", function() {
  	 	if ( $("i.icon-arrow-down").length == 0 )  {
           $("#select").prop("checked", false);
  	 	}
    }); 
*/
 /*   $("#select").on("click", function() {
      if ($("i.icon-arrow-up").is(":visible")) {
      	setTimeout(function(){ 
      		$("#select").prop("checked", false); 
      	}, 500);

      }
    });
*/
/*  BEST SO FAR
    $('#select').mousedown(function(e) {

       e.stopPropagation();
       if ($("i.icon-arrow-up").is(":visible")) {
       	$("#select").unbind('mouseup');
       	$("h1").trigger('click');
      	//$("#select").prop("checked", false);
      	//$("#select").unbind('mouseup');
      }
      else if ($("i.icon-arrow-down").is(":visible")) {
       // $("#select").prop("checked", true);
       // e.stopPropagation();
      }
    });
*/

    $('#select').mousedown(
    function(e) {
    	$("body").css({top: pos.top, left: pos.left});
       if ($("i.icon-arrow-up").is(":visible")) {
         //$("#select").prop("checked", false);
        // e.stopPropagation()
         //$("input[type=radio]").attr('disabled', true);
          
          radio_toggle = 2;

          if (radio_toggle == 2) {
          	manual_click();
          }
        
         //call function
       //  --in function if lock ==true, enable input type radio
         // add an alert between radio button disable and enable         
        // $("#select").prop("checked", false);
         console.log("Clicking when the arrow is up to collapse.");
        // return false;

       }
        }).mouseup(function(){
        	//$("input[type=radio]").attr('disabled', false);
        	//console.log("mouse up");
             // return false;
        });
      //  });






//    $('#select').mouseup(function(e) {
//       e.stopPropagation();
       /* if ($("i.icon-arrow-up").is(":visible")) {
      	$("#select").prop("checked", false);
      }
      else if ($("i.icon-arrow-down").is(":visible")) {
        $("#select").prop("checked", true);
      }  */
 //   });



    $("#select").on("click", function() {
        if ( $("#select").prop("checked") && $("i.icon-arrow-up").attr("display", "hidden"))  {
         //  $("#select").prop("checked", true);
  	 	}

  	 /*	if ( !$("#select").prop("checked") && $("i.icon-arrow-up").attr("display", "block"))  {
  	 	  $("h1").trigger('click');
         //  $("#select").prop("checked", false);
  	 	}
  	 */	

    }); 

/*
    $("#select").change(function(ev){
       ev.preventDefault();
       var checked = document.getElementById("select").checked; 
       console.log("Before: " + checked);
       if ($("#select").prop("checked", true))  {
    	console.log("After: " + checked);
    	//var check = document.getElementById("select").checked; 
    	//alert(check);
           $("#select").prop("checked", false);
        }
        return true;
    }); 

*/   


    //$("input.form-control").removeAttr("value");

   /* $('#form-submit').on('click', function(){
    	$("input.form-control").attr("disabled", "false");
    	alert("clicked");
     });  

  */


  $('#report_form').submit(function(ev) {
    ev.preventDefault(); // to stop the form from submitting
    $("input.form-control").removeAttr('disabled');

   

   // $("input.form-control").attr("value", "1");
   // var date1 = $("input.form-control")[0].attr("val");
    //alert(date1);
    this.submit(); // If all the validations succeeded
  });


  //	$(".aoyue-select > label").append("<input type='radio' name='option'><span class='title animated fadeIn'><i class='icon icon-fire'></i>Hey</span>");

  /*	$(document).off('.datepicker.data-api');

  	$('i').on('click', function(e){
        $(document).on('.datepicker.data-api');
        $('.datepicker').datepicker({
        
    	//ignoreReadonly: true
    });
    

          console.log("Clicked");



     }); 

     */
    
  /*  $('div').on('click', function(e){
    	//alert("Pressed");
        e.preventDefault();
        return false;
     })  */

   /* $('.datepicker').datepicker({
    	//ignoreReadonly: true
    });  */







    //$('#enable').click(function(){
 $('#dateRangePicker1, #dateRangePicker2')
        .datepicker({
            format: 'dd/mm/yyyy',
            startDate: '01/01/2016',
            endDate: '12/30/2025',
			autoclose: true,
			enableOnReadonly: false
        });
	});
    //});

$('#disable').click(function(){
 $(document).off('.datepicker.data-api');





  });

</script>